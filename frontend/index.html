<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<meta http-equiv="Content-type" content="text/html; charset=utf-8" />
	<title>Projecto AW</title>
	<link rel="stylesheet" href="ajax/AutoComplete.css" media="screen" type="text/css">
	<link rel="stylesheet" href="ajax/acomplete.css" media="screen" type="text/css">
	<link rel="stylesheet" href="css/style.css" type="text/css" media="all" />
	<!--[if lte IE 6]><link rel="stylesheet" href="css/ie6.css" type="text/css" media="all" /><![endif]-->
	<script type="text/javascript" src="ajax/util.js" charset="utf-8"></script>
	<script language="javascript" type="text/javascript" src="ajax/acomplete.js" charset="utf-8"></script>
	<script src="ajax/Global.js" language="javascript" charset="utf-8"></script>
    <script src="ajax/XMLWriter.js" language="javascript" charset="utf-8"></script>
	<script type="text/javascript" src="ajax/prototype.js" charset="utf-8"></script>
	<script type="text/javascript" src="classes/Clube.js" charset="utf-8"></script>
	<script type="text/javascript" src="classes/Local.js" charset="utf-8"></script>
	<script type="text/javascript" src="classes/Tempo.js" charset="utf-8"></script>
	<script type="text/javascript" src="classes/Noticia.js" charset="utf-8"></script>
	<script type="text/javascript" src="classes/Integrante.js" charset="utf-8"></script>
	<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=true" charset="utf-8"></script>
	<script type="text/javascript" src="classes/Nr_noticia_local.js" charset="utf-8"></script>
	<script type="text/javascript" src="classes/Nr_noticia_data.js" charset="utf-8"></script>
	<script type="text/javascript" src="classes/Noticia_data_clube.js" charset="utf-8"></script>
	<script type="text/javascript" src="classes/Nr_noticia_integrante.js" charset="utf-8"></script>
	<script type="text/javascript" src="classes/Nr_noticia_local_clube.js" charset="utf-8"></script>
	<script type="text/javascript" src="classes/Noticia_x_clube.js" charset="utf-8"></script>
	<script src="highcharts/js/adapters/prototype-adapter.js" type="text/javascript" charset="utf-8"></script>
	<script src="highcharts/js/highcharts.js" type="text/javascript" charset="utf-8"></script>
	<script type="text/javascript" src="graficos.js" charset="utf-8"></script>
	<script src="http://static.simile.mit.edu/timeline/api-2.3.0/timeline-api.js?bundle=true" type="text/javascript"></script>

	<script type="text/javascript" charset="utf-8">
	
	/*var myGlobalHandlers = {
		onCreate: function(){
			Element.show('systemWorking');
			Element.show('fundoLoading');
		},

		onComplete: function() {
			if(Ajax.activeRequestCount == 0){
				Element.hide('systemWorking');
				Element.hide('fundoLoading');
			}
		}
	};

	Ajax.Responders.register(myGlobalHandlers);*/
	
	var map;
	var nome_localArray = new Array();
	var nome_clubeArray = new Array();
	var nome_integranteArray = new Array();
	var nomes_pesquisa = new Array();
	var locais = new Array();
	var ultimasNoticias = new Array();
	var noticias = new Array();
	var clubes = new Array();
	var integrantes = new Array();
	
	var markersArray = new Array();
	
	var imgClubes = {
		'1' : 'css/images/benfica.png',
		'2' : 'css/images/braga.gif',
		'3' : 'css/images/porto.jpg',
		'4' : 'css/images/Sporting.png',
		'5' : 'css/images/cdn.gif',
	};
	
	var latInicial_1 = 37.04;
   	var latInicial_2 = 42.28;
  	var logInicial_1 = -17.38;
   	var logInicial_2 = -1.89;

	
	var tl;
	
	 var resizeTimerID = null;
	function onResize() {
		if (resizeTimerID == null) {
			resizeTimerID = window.setTimeout(function() {
				resizeTimerID = null;
			}, 500);
		}
	}
	
	function timelineLoad(){
		events = new Timeline.DefaultEventSource();
		getEvents(events);
		
		var bandInfos = [	
			Timeline.createBandInfo({
				width:          "60%",
				intervalUnit:   Timeline.DateTime.DAY,
				intervalPixels: 100,
				eventSource : events
			}),
			Timeline.createBandInfo({
				overview:       true,
				width:          "40%",
				intervalUnit:   Timeline.DateTime.MONTH,
				intervalPixels: 200
			})
		];
		bandInfos[1].syncWith = 0;
  		bandInfos[1].highlight = true;
		
/*		Timeline.CompactEventPainter.prototype._showBubble=function(A,F,B){var E=document.createElement("div");
B=("fillInfoBubble" in B)?[B]:B;
for(var D=0;
D<B.length;
D++){var C=document.createElement("div");
E.appendChild(C);
B[D].fillInfoBubble(C,this._params.theme,this._band.getLabeller());
}SimileAjax.WindowManager.cancelPopups();
SimileAjax.Graphics.createBubbleForContentAndPoint(E,A,F,this._params.theme.event.bubble.width);
};

Timeline.DetailedEventPainter.prototype._showBubble=function(B,E,C){var D=document.createElement("div");
var A=this._params.theme.event.bubble;
C.fillInfoBubble(D,this._params.theme,this._band.getLabeller());
SimileAjax.WindowManager.cancelPopups();
SimileAjax.Graphics.createBubbleForContentAndPoint(D,B,E,A.width,null,A.maxHeight);
};
*/
Timeline.OriginalEventPainter.prototype._showBubble=function(B,E,C){var D=document.createElement("div");
var A=this._params.theme.event.bubble;
C.fillInfoBubble(D,this._params.theme,this._band.getLabeller(),C);
SimileAjax.WindowManager.cancelPopups();
SimileAjax.Graphics.createBubbleForContentAndPoint(D,B,E,A.width,null,A.maxHeight);
};
		
Timeline._Impl.prototype._initialize=function(){var H=this._containerDiv;
var E=H.ownerDocument;
H.className=H.className.split(" ").concat("timeline-container").join(" ");
var C=(this.isHorizontal())?"horizontal":"vertical";
H.className+=" timeline-"+C;
while(H.firstChild){H.removeChild(H.firstChild);
}
this._bands=[];
for(var B=0;
B<this._bandInfos.length;
B++){var G=new Timeline._Band(this,this._bandInfos[B],B);
this._bands.push(G);
}this._distributeWidths();
for(var B=0;
B<this._bandInfos.length;
B++){var F=this._bandInfos[B];
if("syncWith" in F){this._bands[B].setSyncWithBand(this._bands[F.syncWith],("highlight" in F)?F.highlight:false);
}}if(this.autoWidth){for(var B=0;
B<this._bands.length;
B++){this._bands[B].addOnScrollListener(this._autoWidthScrollListener);
}}var D=SimileAjax.Graphics.createMessageBubble(E);
D.containerDiv.className="timeline-message-container";
H.appendChild(D.containerDiv);
D.contentDiv.className="timeline-message";
D.contentDiv.innerHTML="<img src='"+Timeline.urlPrefix+"images/progress-running.gif' /> Loading...";
this.showLoadingMessage=function(){D.containerDiv.style.display="block";
};
this.hideLoadingMessage=function(){D.containerDiv.style.display="none";
};
};		
		  Timeline.DefaultEventSource.Event.prototype.fillInfoBubble =
			function(element, theme, labeller, evt) {
				var div = document.createElement("div");
				div.setAttribute("style","height : 110px; overflow :auto;")
				div.innerHTML = evt.getDescription();
				element.appendChild(div);
			};
		
		tl = Timeline.create(document.getElementById("timeline"), bandInfos);
	}
	
	function createBubbleHTML(dataNews){
		var html = "<ul>";
		for(var i=0; i<dataNews.noticias.length; i++){
			html += "<li><a class='linkNoticia2' href='javascript: void 0' onclick=showQuadroNoticia("+dataNews.noticias[i].idnoticia+")>" + dataNews.noticias[i].assunto + "</a></li>";
		}
		html+="</ul>"
		return(html);
	}
	
	function getEvents(events){
		var tempo = new Tempo();
		var tempos = new Array();
		tempo.getUltimasNoticias(function(result){
			tempos=result;
			tl.getBand(0).getEventSource().layout();
		});
		
		for(var i=0; i<tempos.length; i++){
			var evt = new Timeline.DefaultEventSource.Event ({
  				start: new Date(tempos[i].dataInterpretada),
  				instant : true,
  				description : createBubbleHTML(tempos[i])
  			});
  			events.add(evt);
		}
		
		
		
		/*
		 var evt = new Timeline.DefaultEventSource.Event ({
  			 start: new Date("2012-05-03"),
  			 instant : true,
  		});	
  		events.add(evt);*/
	}
	
	function initialize() {
		timelineLoad();
		//getEvents();
		
    	// LatLong de Liboa
    	var latlng = new google.maps.LatLng(39.71284,-9.635475);
    	// Opção iniciais para o mapa
    	var myOptions = {
      		zoom: 6,
      		center: latlng,
      		mapTypeId: google.maps.MapTypeId.ROADMAP
    	};
    	// Criação do Mapa
    	map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
    	getLocaisNoticiasByCoordenadas(latInicial_1, latInicial_2, logInicial_1, logInicial_2);
    	
    	// Evento para alteração de Markers a serem mostrados
    	/*google.maps.event.addListener(map, 'dragend', function() {
        	var sw = map.getBounds().getSouthWest();
        	var ne =  map.getBounds().getNorthEast();
        	var b = map.getBounds().toString();
        	//alert(b);
      	});
      		
		google.maps.event.addListener(map, 'zoom_changed', function() {
        	var sw = map.getBounds().getSouthWest();
        	var ne =  map.getBounds().getNorthEast();
        	var b = map.getBounds().toString();
        	//alert(b);
      	});*/
		
		//Recuperação das últimas notícias (ano corrente)	 		
    	/*var tempo = new Tempo();
    	tempo.getUltimasNoticias(function (result){
  			ultimasNoticias = result;
  		});*/
    	
    	//Inclusão dos locais das últimas notícias no mapa inicial
    	//setInitialMarks();
    	
    	// Inclusão das últimas notícias na barra lateral da página
    	//writeLastNews();
    	
    		    		
  		}
  		
  		function createAutoCompleteOptions() {
  			getAllLocais(0,0);
	  		getAllClubes(0,0);
	    	getAllIntegrantes(0,0);
	    		
	  		//Set do Autocomplete do input de pesquisa
	  		autoComplete.Set("mygroup1", nomes_pesquisa);
	  		var locaisAux = new Array();
	  		locaisAux = nome_localArray.slice();
	  		autoComplete.Set("mygroup2", locaisAux);
  		}
 
  		  		
  		function showAllClubes() {
  			$("showResult").src="./results/clubes.html";
  			$("showResult").style.display = "inline";
  		}
  		
  		function showAllLocais() {
  			$("showResult").src="./results/locais.html";
  			$("showResult").style.display = "inline";
  			
  			// Requisição de todos os locais para o WebService
  			var local = new Local();
  			local.getAllLocais(function (result){
  				locais = result;
  				$("showResult").src="./results/locais.html";
  				$("showResult").style.display = "inline";
  			});
  		}
  		
  		function setInitialMarks() {
  			//Criação das marcas no mapa
  			var marker;
	  		
	  		/* Recuperação das coordenadas dos locais das últimas notícias */
	  		for(i=0; i<ultimasNoticias.length; i++) {
				//var result = ultimasNoticias[i].dataInterpretada;
				for(var m=0; m<ultimasNoticias[i].noticias.length; m++) {
				   	var idNoticia = ultimasNoticias[i].noticias[m].idnoticia;
				   	var not = new Noticia();
					not.getNoticiaById(idNoticia, function(result) {
						var newAux = new Noticia();
						newAux = result;
						
						/* Cria um objeto Marker para cada local da notícia */
						for(var k=0; k<newAux.locaisNoticias.length;k++) {
							coord = newAux.locaisNoticias[k].coordenadas.split(";");
							local = new google.maps.LatLng(parseFloat(coord[0]), parseFloat(coord[1]));
							nome_local = newAux.locaisNoticias[k].nome_local;
							idlocal = newAux.locaisNoticias[k].idlocal
							/* Criação do objeto Marker */
							marker = new google.maps.Marker({
					  			position: local,
					  			title: nome_local,
					  			map: map
					  		});
					  		
					  		/* Inclusão do marker no array global */
					  		markersArray.push(marker);
					  		
					  		/* Montagem do Texto em Balão com todas as notícias de um local */
					  		var local = new Local();
					  		var noticiasLocal = new Array();
					  		local.getNoticiasLocal(idlocal, function (result){
    							noticiasLocal = result;
    						});
    						
    						var contentString = createContentMarker(nome_local, noticiasLocal); 
					  		
					  		google.maps.event.addListener(marker, 'click', function(content) {
					  			return function() {
					  				infoWindow.setContent(content);
					  				infoWindow.open(map,this);
					  			}
					  		}(contentString));
						}			   			
					});
				}
			}
  		}
  		
  		function createContentMarker(nome_local, noticias) {
  			var content = "<div id='infoMarker'>";
  			content += "<h2><center>Notícias em " + nome_local + "</center></h2>";
  			content +=  "<table id='infoMarker-t'><thread>";
  			content += "<tr><th>Data de Publicação</th>";
  			content += "<th>Assunto</th></tr></thread>";
  			content += "<tbody>";
  			for(var i=0; i<noticias.length; i++){
  				var dataAux = noticias[i].data_pub.substring(0,11);
  				content += "<tr><td>" + dataAux +  "</td>";
  				content += "<td><a href='javascript: void 0' onclick=showQuadroNoticia("+noticias[i].idnoticia+")>" + noticias[i].assunto +  "</a></td></tr>";
  			}
  			content +=  "</tbody></table>";
  			content +=  "</div>";
  			return content;
  		}
  		
  		function showQuadroNoticia(idN) {
  			$("quadroNoticia").style.display="block";
  			
  			/* Recupera notícia escolhida */
  			/*var noticia = new Noticia();
  			var n = new Noticia();
  			noticia.getNoticiaById(idN, function(result) {
  				n = result;
  			});*/
  			
  			/* Mostra dados básicos da notícia */
  			getNoticiaById(idN);
  		}
  		
  		function closeQuadroNoticia(){
  			$("assuntoNoticiaEscolhida").innerHTML = "";
  			$("descricaoNoticiaEscolhida").innerHTML = "";
  			$("qualificacaoNoticiaEscolhida").innerHTML = ""
  			$("linkNoticiaEscolhida").href = "#";
  			$("clubesNoticiaEscolhida").innerHTML = "";
  			$("integrantesNoticiaEscolhida").innerHTML = "";
  			$("locaisNoticiaEscolhida").innerHTML = "";
  			$("datasNoticiaEscolhida").innerHTML = "";
  			$("countComentarios").innerHTML = "";
			$("todosComentarios").innerHTML = "";
  			$("quadroNoticia").style.display="none";
  			
  		}
  		
  		function refreshQuadroNoticia(idN) {
  			$("assuntoNoticiaEscolhida").innerHTML = "";
  			$("descricaoNoticiaEscolhida").innerHTML = "";
  			$("qualificacaoNoticiaEscolhida").innerHTML = ""
  			$("linkNoticiaEscolhida").href = "#";
  			$("clubesNoticiaEscolhida").innerHTML = "";
  			$("integrantesNoticiaEscolhida").innerHTML = "";
  			$("locaisNoticiaEscolhida").innerHTML = "";
  			$("datasNoticiaEscolhida").innerHTML = "";
  			$("countComentarios").innerHTML = "";
			$("todosComentarios").innerHTML = "";
  			getNoticiaById(idN);
  		}
  		
  		function writeLastNews() {
  			var lista = document.getElementById("newsSpot");
  			//alert(ultimasNoticias.length);
  			
  			var qtdeNews = ultimasNoticias.length < 5 ? ultimasNoticias.length : 5; 
  			for(var i=0; i<qtdeNews; i++) { 			
  				var n1 = document.createElement("li");
	  			var small = document.createElement("small");
	  			small.setAttribute("class", "date");
	  			small.innerHTML = ultimasNoticias[i].dataInterpretada;
	  			n1.appendChild(small);
	  			lista.appendChild(n1);
	  			for(var m=0; m<ultimasNoticias[i].noticias.length; m++) {
		  			var desc = document.createElement("p");
		  			desc.innerHTML =  ultimasNoticias[i].noticias[m].assunto;
		  			var linha = document.createElement("br");
		  			lista.appendChild(desc);
		  			lista.appendChild(linha);
		  		}
			}  			
  		}
  		function showEscudos() {
  			var divEscudos = $("escudosClubes");
  			
  			//divEscudos.appendChild(tr);
  			for(var i=0; i<img_clubes.length; i++) { 			
  				var tr_1 = document.createElement("tr");
  				var tr_2 = document.createElement("tr");
  				var tr_3 = document.createElement("tr");
  				
  				var td_1 = document.createElement("td");
  				td_1.setAttribute("align","center");
  				//if(img_clubes[i] != "css/images/escudo_default.JPG") {
  					var img = document.createElement("img");
	  				img.setAttribute("src", img_clubes[i]);
	  				img.setAttribute("width",48);
	  				img.setAttribute("height",48);
	  				td_1.appendChild(img);
				//}	  			
	  			var td_2 = document.createElement("td");
  				td_2.setAttribute("align","center");
  				td_2.innerHTML =  nome_clubeArray[i];
  				
  				var td_3 = document.createElement("td");
  				td_3.setAttribute("align","center");
  				var a = document.createElement("a");
  				a.setAttribute("id","addClube_" + i);
  				a.setAttribute("href","javascript:void(0)");
  				var img_plus = document.createElement("img");
  				img_plus.setAttribute("src", "css/images/plus.png");
	  			img_plus.setAttribute("width",12);
	  			img_plus.setAttribute("height",12);
	  			a.appendChild(img_plus);
	  			td_3.appendChild(a);
	  			
	  			tr_1.appendChild(td_1);
  				tr_2.appendChild(td_2);
  				tr_3.appendChild(td_3);
  				divEscudos.appendChild(tr_1);
  				divEscudos.appendChild(tr_2);
  				divEscudos.appendChild(tr_3);
  				
			}
  		}
  		
  		function showFotosIntegrantes() {
  			var divFotos = $("fotosIntegrantes");
  			
  			for(var i=0; i<img_integrantes.length; i++) { 			
  				var tr_1 = document.createElement("tr");
  				var tr_2 = document.createElement("tr");
  				var tr_3 = document.createElement("tr");
  				
  				var td_1 = document.createElement("td");
  				td_1.setAttribute("align","center");
  				var img = document.createElement("img");
	  			img.setAttribute("src", img_integrantes[i]);
	  			img.setAttribute("width",48);
	  			img.setAttribute("height",48);
	  			td_1.appendChild(img);
	  			
	  			var td_2 = document.createElement("td");
  				td_2.setAttribute("align","center");
  				td_2.innerHTML =  nome_integranteArray[i];
  				
  				var td_3 = document.createElement("td");
  				td_3.setAttribute("align","center");
  				var a = document.createElement("a");
  				a.setAttribute("id","addIntegrante_" + i);
  				a.setAttribute("href","javascript:void(0)");
  				var img_plus = document.createElement("img");
  				img_plus.setAttribute("src", "css/images/plus.png");
	  			img_plus.setAttribute("width",12);
	  			img_plus.setAttribute("height",12);
	  			a.appendChild(img_plus);
	  			td_3.appendChild(a);
	  			
	  			tr_1.appendChild(td_1);
  				tr_2.appendChild(td_2);
  				tr_3.appendChild(td_3);
  				divFotos.appendChild(tr_1);
  				divFotos.appendChild(tr_2);
  				divFotos.appendChild(tr_3);
  				
			}
  		}
  		
  		function clearOverlays() {
  			if (markersArray) {
    			for (var i = 0; i < markersArray.length; i++ ) {
      				markersArray[i].setMap(null);
    			}
  			}
		}
  		
  		
  		function setMarkers(localArray) {
  			for(var i=0; i<localArray.length; i++) {
		  				coord = localArray[i].coordenadas.split(";");
						local = new google.maps.LatLng(parseFloat(coord[0]), parseFloat(coord[1]));
						nome_local = localArray[i].nome_local;
						idlocal = localArray[i].idlocal
						/* Criação do objeto Marker */
						marker = new google.maps.Marker({
									position: local,
						  			title: nome_local,
						  			map: map
						  		});
						  		
						/* Inclusão do marker no array global */
						markersArray.push(marker);
						 		
						/* Montagem do Texto em Balão com todas as notícias de um local */
						var local2 = new Local();
						var noticiasLocal = new Array();
						local2.getNoticiasLocal(idlocal, function (result){
	    						noticiasLocal = result;
	    				});
	    				
	    				var contentString = createContentMarker(nome_local, noticiasLocal); 
						 		
						google.maps.event.addListener(marker, 'click', function(content) {
							return function() {
								infoWindow.setContent(content);
								infoWindow.open(map,this);
							}
						}(contentString));
		  			}
  		}
  		
  		function searchNews() {
  			var param = $("parametroPesquisa").value;
  			
  			if(param == "") {
  				alert("Preenchimento do campo de pesquisa obrigatório");
  				return false;
  			}
  			else {
  				clearOverlays();
  			
  				/* Buscar locais usando parametro de pesquisa */
	  			var local = new Local();
	  			var localArray = new Array();
	  			local.getLocalByNome(param, function (result){
	    			localArray = result;
	    		});
	    		
	    		
	    		/* Acrescentar Markers dos locais no mapa */ 
	    		if(localArray != null) {
		  			//alert("Locais: " + localArray.length);
		  			setMarkers(localArray);
				} 			
	  			/* Buscar integrantes usando parametro de pesquisa */
	  			var integrante = new Integrante();
	  			var integranteArray = new Array();
	  			integrante.getIntegranteByNome(param, function (result){
	    			integranteArray = result;
	    		});
	  			
	  			if(integranteArray != null) {
	  				//alert("Integrantes: " + integranteArray.length);
	  				// Buscar noticias com integrantes encontrados 
	  				var noticiaIntegranteArray = new Array();
	  				for(var i=0; i<integranteArray.length; i++) {
	  					integrante.getNoticiasByIdIntegrante(integranteArray[i].idintegrante, function (result){
	    					noticiaIntegranteArray = result;
	    					if(noticiaIntegranteArray != null) {
	    						// Buscar locais das notícias com integrantes encontrados 
	    						var n = new Noticia();
	    						var notAux = new Noticia();
	    						for(var j=0; j<noticiaIntegranteArray.length; j++){
	    							n.getNoticiaById(noticiaIntegranteArray[j].idnoticia, function (result){
	    								notAux = result;
	    							});
	    							// Acrescentar Markers dos locais das notícias dos integrantes no mapa
	    							setMarkers(notAux.locaisNoticias);	
	    						}
	    					}
	    						
	    				});
					}
				}	  			
	  			
	  			/* Buscar clubes usando parametro de pesquisa */
	  			var clube = new Clube();
	  			var clubeArray = new Array();
	  			clube.getClubeByNome(param, function(result){
	  				clubeArray = result;
	  			});
	  			
	
	  			if(clubeArray != null) {
	  				//alert("Clubes: " + clubeArray.length);
	  				/* Buscar noticias com clubes encontrados */
	  				var noticiaClubeArray = new Array();
	  				for(var i=0; i<clubeArray.length; i++) {
	  					clube.getNoticiasByIdClube(clubeArray[i].idclube, function (result){
	    					noticiaClubeArray = result;
	    					if(noticiaClubeArray != null) {
	    						/* Buscar locais das notícias com clubes encontrados */
	    						var n = new Noticia();
	    						var notAux = new Noticia();
	    						for(var j=0; j<noticiaClubeArray.length; j++){
	    							n.getNoticiaById(noticiaClubeArray[j].idnoticia, function (result){
	    								notAux = result;
	    							});
	    							/* Acrescentar Markers dos locais das notícias dos clubes no mapa */
	    							setMarkers(notAux.locaisNoticias);	
	    						}
	    					}
	    						
	    				});
					}
				}
  			}
  		}
  		
  		function showHideDiv(div){
  			//var divComentario = $('comentario');
  			if(div.style.display == 'none') {
  				div.style.display = 'block';
  			}
  			else {
  				div.style.display = 'none';
  			}
  		}
  function inserirComentario(id) {
  			try
            {
                var XML=new XMLWriter();
                //XML.BeginNode("xml");
                XML.BeginNode("comentario");
                XML.Node("texto", $("comentarioTexto").value);
                XML.Node("user", $("comentarioUser").value);
                XML.Close(); // Takes care of unended tags.
                inserirComentarioNoticia(id,XML.ToString());
                showHideDiv($("comentario"));
            }
            catch(Err)
            {
                alert("Error: " + Err.description);
            }
  		}
		
  		
  		function graphLocais(){
   			$("graficoOutterBox").style.display="block";
 			$("quadroGrafico").style.display="block";
  			drawLocais('quadroGrafico');
  		}
  		
  		function graphClubes(){
  			$("graficoOutterBox").style.display="block";
			$("quadroGrafico").style.display="block";
  			drawClubes('quadroGrafico');
 		}
  		
  		function graphIntegrantes(){
  			$("graficoOutterBox").style.display="block";
			$("quadroGrafico").style.display="block";
  			drawIntegrantes('quadroGrafico');
  		}
  		
  		function graphMes(){
  			$("graficoOutterBox").style.display="block";
			$("quadroGrafico").style.display="block";
  			drawMes('quadroGrafico');
 		}
  		
  		function graphClubesLocal(){
  			$("graficoOutterBox").style.display="block";
			$("quadroGrafico").style.display="block";
  			drawClubesLocal('quadroGrafico');
 		}
  		
  		function graphClubesMes(){
  			$("graficoOutterBox").style.display="block";
			$("quadroGrafico").style.display="block";
  			drawClubesMes('quadroGrafico');
 		}
  		
  		function closeQuadroGrafico(){
  			$("quadroGrafico").style.display="none";
  			$("graficoOutterBox").style.display="none";
  			$("quadroGrafico").innerHTML="";
 		}
  			
	</script>
</head>
<body onload="initialize()" onresize="onResize()">
<!-- <script>getLocaisNoticiasByCoordenadas(latInicial_1, latInicial_2, logInicial_1, logInicial_2)</script> -->
<script>createAutoCompleteOptions()</script>
<!-- <div id='systemWorking'><img src='css/images/ajax-loader3.gif' align='middle'></div>
<div id='fundoLoading'></div> -->

<div id="quadroNoticia" style="display:none;">
<p align="right"><br /><a href="javascript: void(0)" onclick="closeQuadroNoticia()"><img src="css/images/close.png" alt="Close" border=0 /></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p>
<div id="clubesQuadroNoticia">
	<p align="center">Clubes</p> <hr />
	<table id="escudosClubes">
	<script>showEscudos()</script>	
	</table>
</div>
<div id="noticiaQuadroNoticia">
	<p align="left" class="assunto" id="assuntoNoticiaEscolhida"></p>
		<hr width=75% /><hr width=75% />
		<p class="descricao" id="descricaoNoticiaEscolhida"></p>
		<br />
		<p align='right'><a href="#" id="linkNoticiaEscolhida" target="_blank">Leia mais...</a>&nbsp;&nbsp;&nbsp;&nbsp;</p>
		<p align="left"><a href="javascript:void(0)"><img src="css/images/button-like.png" alt="Curtir" align="middle" style="margin-left:5px" /></a><font id="qualificacaoNoticiaEscolhida"></font>
						<a href="javascript:void(0)" onclick="showHideDiv($('todosComentarios'))"><img src="css/images/comment-icon.jpg" alt="Comentários" align="middle" /></a><span id="countComentarios"></span>&nbsp;&nbsp;&nbsp;&nbsp;
						 <a href="javascript: void(0)" onclick="showHideDiv($('comentario'))">Adicionar Comentário</a></p>
		
		<br />
		<div id="todosComentarios" style="display:none;">
		</div>
		<div id="comentario" style="display:none;">
			<p style="margin-left:12px;">Nome: <input id="comentarioUser" type="text" size="15" name="user" value="Anonymous" class="assunto" /></p><br />
			<p><textarea rows="3" cols="30" id="comentarioTexto" style="margin-left:12px;" class="assunto"></textarea></p>
							 <a id="botaoComentario" href="#" class="mybutton" onclick="javascript void(0)">Enviar</a></div>
		<p align="left" class="assunto">&nbsp;&nbsp;&nbsp;&nbsp;Clubes citados na notícia</p>
		<hr width=75% />
		<p id="clubesNoticiaEscolhida"></p>
		<br />
		<p align="left" class="assunto">&nbsp;&nbsp;&nbsp;&nbsp;Pessoas citadas na notícia</p>
		<hr width=75% />
		<p id="integrantesNoticiaEscolhida" style="margin-left:12px;"></p>
		<br />
		<p align="left" class="assunto">&nbsp;&nbsp;&nbsp;&nbsp;Locais citados na notícia</p>
		<br />
		<hr width=75% />
		
		<p id="locaisNoticiaEscolhida" style="margin-left:12px;"></p>
		<br />
		<p align="left" class="assunto">&nbsp;&nbsp;&nbsp;&nbsp;Datas citados na notícia</p>
		<hr width=75% />
		<p id="datasNoticiaEscolhida" style="margin-left:12px;"></p>
		<br />
		
		
</div>


<div id="pessoasQuadroNoticia">
	<p align="center">Pessoas</p> <hr />
	<table id="fotosIntegrantes">
	<script>showFotosIntegrantes()</script>	
	</table>
</div>
</div>
<div id="quadroGrafico" style="display:none;"></div>
<div id="graficoOutterBox" style="display:none;">
<p align="right"><br /><a href="javascript: void(0)" onclick="closeQuadroGrafico()"><img src="css/images/close.png" alt="Close" border=0 /></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p>
</div>
	<!-- Header -->
	<div id="header">
		<div class="shell">
			<!-- Logo -->
			<h1 id="logo" class="notext"><a href="#">Sport Zone Sport Portal</a></h1>
			<!-- End Logo -->
		</div>
	</div>
	<!-- End Header -->
	
	<div id="navigation">
		<form name="pesquisa">
		<center>
		<div class="shell">
			<div class="cl">&nbsp;</div>
			<ul>
			    <li><a href="#">Pesquisa </a></li>
			    <li><br /><input type="text" size="50" id="parametroPesquisa" autoComplete="mygroup1" /></li>
			    <li><a href="#" onclick='searchNews()'><img src="css/images/search.png" border="0" alt="Search" /></a></li>
			    
			    <li><a href="#">Administração</a></li>
			</ul>
			<div class="cl">&nbsp;</div>
		</div>
		</center>
		</form>
	</div>
	<!-- Heading -->
	<div id="heading">
		<div class="shell">
			<div id="heading-cnt">
				
				<!-- Sub nav -->
				<!--  <div id="side-nav">
					<ul>
					    <li class="active"><div class="link"><a href="#">home</a></div></li>
					    <li><div class="link"><a href="javascript:showAllClubes()">clubes</a></div></li>
					    <li><div class="link"><a href="#">pessoas</a></div></li>
					    <li><div class="link"><a href=javascript:showAllLocais()>locais</a></div></li>
					    <li><div class="link"><a href="#">datas</a></div></li>
					</ul>
				</div> -->
				 <!--  End Sub nav -->
				
				<!-- Widget -->
				<div id="heading-box">
					<div id="heading-box-cnt">
						<div class="cl">&nbsp;</div>
						
						<!--  <div id="map_canvas" style="width:438px; height:310px"></div> -->
						<!-- Main Slide Item -->
						<div class="featured-main">
							<!-- <a href="#"><img id="map_canvas" src="css/images/featured-main.jpg" alt="" /></a> -->
							<div id="map_canvas" style="width:705px; height:310px"></div>
							
						</div>
						<!-- End Main Slide Item -->
						
						<div class="featured-side">
							
							<!-- Slide Item 1 
							<div class="featured-side-item">
								<div class="cl">&nbsp;</div>
								<a href="#" class="left"><img src="css/images/benfica.png" alt="" /></a>
								<br><h4><a href="#">Sport Lisboa e Benfica</a></h4>
								<p>&nbsp;</p>
								<div class="cl">&nbsp;</div>
							</div>
							<!-- End Slide Item 1 
							
							<!-- Slide Item 2 
							<div class="featured-side-item">
								<div class="cl">&nbsp;</div>
								<a href="#" class="left"><img src="css/images/porto.jpg" alt="" /></a>
								<br><h4><a href="#">Sport Clube do Porto</a></h4>
								<p>&nbsp;</p>
								<div class="cl">&nbsp;</div>
							</div>
							<!-- End Slide Item 2 
							
							<!-- Slide Item 3 
							<div class="featured-side-item">
								<div class="cl">&nbsp;</div>
								<a href="#" class="left"><img src="css/images/Sporting.png" alt="" /></a>
								<br><h4><a href="#">Sporting Clube de Portugal</a></h4>
								<p>&nbsp;</p>
								<div class="cl">&nbsp;</div>
							</div>
							<!-- End Slide Item 3 
							
							<!-- Slide Item 4 
							<div class="featured-side-item">
								<div class="cl">&nbsp;</div>
								<a href="#" class="left"><img src="css/images/braga.gif" alt="" /></a>
								<br><h4><a href="#">Sporting Clube de Braga</a></h4>
								<p>&nbsp;</p>
								<div class="cl">&nbsp;</div>
							</div>
							<!-- End Slide Item 4 
							
							<!-- Slide Item 5 
							<div class="featured-side-item">
								<div class="cl">&nbsp;</div>
								<a href="#" class="left"><img src="css/images/cdn.gif" alt="" /></a>
								<br><h4><a href="#">Centro Desportivo Nacional</a></h4>
								<p>&nbsp;</p>
								<div class="cl">&nbsp;</div>
							</div>
							<!-- End Slide Item 5 -->
						</div>
						<div class="cl">&nbsp;</div>						
					</div>
				</div>
				<!-- End Widget -->
				
			</div>			
		</div>
	</div>
	<!-- End Heading -->
	
	<!-- Main -->
	<div id="main">
		<div class="shell">		
			<div class="cl">&nbsp;</div>	
			<div id="sidebar">
				<h2>Bitaites</h2>
				<ul id="newsSpot">
				    <li>
				    	<small class="date">@Autor</small>
				    	<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>
				    </li>
				    <li>
				    	<small class="date">@Autor</small>
				    	<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>
				    </li>
				    <li>
				    	<small class="date">@Autor</small>
				    	<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>
				    </li>
				    <li>
				    	<small class="date">@Autor</small>
				    	<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>
				    </li>
				    <li>
				    	<small class="date">@Autor</small>
				    	<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>
				    </li>
				</ul>
			</div>
			<div id="content">
				<!--  <div class="cl">&nbsp;</div>
				<div class="grey-box">
					<h3><a href="#">Lorem ipsum dolor sit amet.</a></h3>
					<a href="#"><img src="css/images/main-1.jpg" alt="" /></a>
					<p>
						<span>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Curabitur elementum, odio tincidunt egestas</span>
						<a href="#" class="button">Read more</a>
					 </p>
				</div>-->
				
				<!-- <div class="grey-box">
					<h3><a href="#">Curabitur elementum, odio tincidunt </a></h3>
					<a href="#"><img src="css/images/main-2.jpg" alt="" /></a>
					<p>
						<span>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Curabitur elementum, odio tincidunt egestas</span>
						<a href="#" class="button">Read more</a>
					 </p>
				</div>
				<div class="grey-box last">
					<h3><a href="#">Etiam iaculis tortor vel arcu porta consectetur.</a></h3>
					<a href="#"><img src="css/images/main-3.jpg" alt="" /></a>
					<p>
						<span>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Curabitur elementum, odio tincidunt egestas</span>
						<a href="#" class="button">Read more</a>
					 </p>
				</div> -->
				<div class="cl">&nbsp;</div>
				 <div class="video-box">
					<div class="cl">&nbsp;</div>
					<h2 class="left">Estatísticas</h2>
					<!--<a href="#" class="button">All videos</a>-->
					<div class="cl">&nbsp;</div>
					<div class="video-item-box">
						<a class="left" href="javascript: void(0)" onclick="graphLocais()"><img src="css/images/locais.png" alt="Top 10 locais" /></a>
						<p>Top 10 locais com mais notícias</p>
						<a class="left" href="javascript: void(0)" onclick="graphLocais()">Ver gráfico</a>
					</div>
					<div class="video-item-box second">
						<a class="left" href="javascript: void(0)" onclick="graphClubes()"><img src="css/images/clubes.png" alt="Top 10 clubes" /></a>
						<p>Top 10 clubes com mais notícias</p>
						<a class="left" href="javascript: void(0)" onclick="graphClubes()">Ver gráfico</a>
					</div>
					<div class="video-item-box">
						<a class="left" href="javascript: void(0)" onclick="graphIntegrantes()"><img src="css/images/integrantes.png" alt="Top 10 integrantes" /></a>
						<p>Top 10 integrantes com mais notícias</p>
						<a class="left" href="javascript: void(0)" onclick="graphIntegrantes()">Ver gráfico</a>
					</div>
					<div class="video-item-box second">
						<a class="left" href="javascript: void(0)" onclick="graphMes()"><img src="css/images/meses.png" alt="Notícias por mês" /></a>
						<p>Notícias por mês</p>
						<a class="left" href="javascript: void(0)" onclick="graphMes()">Ver gráfico</a>
					</div>
					<div class="video-item-box">
						<a class="left" href="javascript: void(0)" onclick="graphClubesLocal()"><img src="css/images/clubelocal.png" alt="Clubes por local" /></a>
						<p>Número de noticias de cada clube por local (Top 10)</p>
						<a class="left" href="javascript: void(0)" onclick="graphClubesLocal()">Ver gráfico</a>
					</div>
					<div class="video-item-box second">
						<a class="left" href="javascript: void(0)" onclick="graphClubesMes()"><img src="css/images/clubemes.png" alt="Clubes por mês" /></a>
						<p>Número de noticias de cada clube por mês</p>
						<a class="left" href="javascript: void(0)" onclick="graphClubesMes()">Ver gráfico</a>
					</div>
					<div class="cl">&nbsp;</div>
				</div>
			</div>
			<div class="cl">&nbsp;</div>
		</div>
	</div>
	
	<div id="timeline" style="height: 50px; border: 1px solid #aaa"></div>
	<noscript>
		This page uses Javascript to show you a Timeline. Please enable Javascript in your browser to see the full page. Thank you.
	</noscript>
	
	<!-- End Main -->
	
	<!-- Footer -->
	<!-- <div id="footer">
		<div class="shell">
			<div class="cl">&nbsp;</div>
			<a href="#" class="left">TERMS OF USE</a>
			<a href="#" class="left">PRIVACY POLICY</a>
			<p class="right">&copy; Sitename.com. Design by <a href="http://chocotemplates.com">ChocoTemplates.com</a> | downloaded from <a href="http://www.mytemplatez.com">Free Templates</a></p>
			<div class="cl">&nbsp;</div>
		</div>
	</div> -->
	<!-- End Footer -->
</body>
</html>